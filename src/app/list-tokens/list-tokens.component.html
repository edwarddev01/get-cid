<div>
  <div class="bg-white rounded-xl shadow-sm overflow-hidden h-full">
    <!-- Encabezado con estadísticas rápidas -->
    <div class="border-b border-gray-100 bg-gradient-to-r from-blue-50 to-white p-6">
      <div class="flex items-center justify-between">
        <div class="flex items-center gap-3">
          <div class="w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-blue-600">
              <path d="M21 8V7a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h6"></path>
              <path d="M16 8h-8"></path>
              <path d="M12 12h-4"></path>
              <circle cx="16" cy="16" r="6"></circle>
              <path d="M16 14v4"></path>
              <path d="M14 16h4"></path>
            </svg>
          </div>
          <div>
            <h3 class="text-xl font-bold text-gray-800 leading-tight">
              Historial de Tokens
            </h3>
            <p class="text-sm text-gray-500 mt-1">
              Visualiza y administra tus tokens generados.
            </p>
          </div>
        </div>
        
        <!-- Contador de tokens y filtros rápidos -->
        <div class="flex items-center gap-3">
          <div class="bg-blue-100 text-blue-800 rounded-full px-3 py-1 text-sm font-medium">
            Total: {{ tokens.length }}
          </div>
          <div class="hidden md:flex gap-2">
            <button class="px-3 py-1 text-sm rounded-full bg-gray-100 hover:bg-gray-200 text-gray-800 transition-colors">
              Todos
            </button>
            <button class="px-3 py-1 text-sm rounded-full bg-gray-100 hover:bg-gray-200 text-gray-800 transition-colors">
              Activos
            </button>
            <button class="px-3 py-1 text-sm rounded-full bg-gray-100 hover:bg-gray-200 text-gray-800 transition-colors">
              Inactivos
            </button>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Barra de búsqueda y controles -->
    <div class="p-4 border-b border-gray-100 bg-gray-50">
      <div class="flex flex-col md:flex-row flex-wrap items-center justify-between gap-4">
        <div class="relative w-full ">
          <input
            class="flex h-10 w-full  rounded-lg border border-gray-300 bg-white px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 pl-9 transition-colors"
            type="search"
            placeholder="Buscar tokens..."
            [(ngModel)]="searchText"
            (ngModelChange)="gettokensFiltered()"
          />
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="20"
            height="20"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
            class="absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"
          >
            <circle cx="11" cy="11" r="8"></circle>
            <path d="m21 21-4.3-4.3"></path>
          </svg>
        </div>
        <!-- Selector de elementos por página -->
        <div class="flex items-center gap-2">
          <span class="text-sm text-gray-600">Mostrar:</span>
          <select class="h-9 rounded-lg border border-gray-300 bg-white px-2 py-1 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500">
            <option value="3" selected>3</option>
            <option value="5">5</option>
            <option value="10">10</option>
            <option value="20">20</option>
          </select>
        </div>
        <!-- Paginación y opciones adicionales -->
        <div class="flex items-center gap-3 w-full md:w-auto justify-between md:justify-end">
          
          
          <!-- Control de paginación -->
          <nav aria-label="pagination" class="flex items-center">
            <pagination-controls
              class="my-pagination inline-flex items-center justify-center gap-1"
              (pageChange)="page = $event"
              previousLabel="Anterior"
              nextLabel="Siguiente"
              [maxSize]="5"
              [autoHide]="true"
              [responsive]="true"
              screenReaderPaginationLabel="Paginación"
              screenReaderPageLabel="página"
              screenReaderCurrentLabel="Te encuentras en la página"
            >
            </pagination-controls>
          </nav>
        </div>
      </div>
    </div>
    
    <!-- Tabla de tokens con diseño mejorado -->
    <div class="p-4">
      <div class="relative w-full overflow-auto rounded-lg border border-gray-200">
        <table class="w-full caption-bottom text-sm">
          <thead class="bg-gray-50 text-gray-700">
            <tr>
              <th class="h-11 px-4 text-left font-medium">
                Fecha Creación
              </th>
              <th class="h-11 px-4 text-left font-medium">
                Usos Restantes
              </th>
              <th class="h-11 px-4 text-left font-medium">
                Token
              </th>
              <th class="h-11 px-4 text-left font-medium">
                Estado
              </th>
              <th class="h-11 px-4 text-center font-medium">
                Acciones
              </th>
            </tr>
          </thead>
          <tbody>
            <tr
              *ngFor="
                let token of tokensFilterd
                  | paginate
                    : { itemsPerPage: 3, currentPage: page, totalItems: total }
              "
              class="border-t border-gray-200 hover:bg-gray-50"
            >
              <!-- Fecha de creación -->
              <td class="p-4 align-middle">
                <div class="flex flex-col">
                  <span class="font-medium">{{ token.createdAt | date:'dd/MM/yyyy' }}</span>
                  <span class="text-xs text-gray-500">{{ token.createdAt | date:'HH:mm' }}</span>
                </div>
              </td>
              
              <!-- Usos restantes con controles -->
              <td class="p-4 align-middle">
                <div class="flex items-center gap-1">
                  <button
                    class="inline-flex items-center justify-center rounded-lg border border-gray-300 bg-white p-1 text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-1"
                  >
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      width="18"
                      height="18"
                      viewBox="0 0 24 24"
                      fill="none"
                      stroke="currentColor"
                      stroke-width="2"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      class="w-4 h-4"
                    >
                      <path d="M5 12h14"></path>
                    </svg>
                  </button>
                  
                  <input
                    class="flex h-9 rounded-lg border border-gray-300 bg-white px-3 py-1 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 w-16 text-center"
                    type="number"
                    [value]="token.valid"
                  />
                  
                  <button
                    class="inline-flex items-center justify-center rounded-lg border border-gray-300 bg-white p-1 text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-1"
                  >
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      width="18"
                      height="18"
                      viewBox="0 0 24 24"
                      fill="none"
                      stroke="currentColor"
                      stroke-width="2"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      class="w-4 h-4"
                    >
                      <path d="M5 12h14"></path>
                      <path d="M12 5v14"></path>
                    </svg>
                  </button>
                </div>
              </td>
              
              <!-- Token con formato monoespaciado -->
              <td class="p-4 align-middle">
                <div class="font-mono text-sm bg-gray-50 p-1 rounded border border-gray-200 max-w-[200px] truncate">
                  {{ token.token }}
                </div>
              </td>
              
              <!-- Estado con mejor diseño de badge -->
              <td class="p-4 align-middle">
                <span
                  *ngIf="token.status"
                  class="inline-flex items-center rounded-full bg-green-100 px-2.5 py-0.5 text-xs font-medium text-green-800"
                >
                  <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-1">
                    <path d="M20 6 9 17l-5-5"></path>
                  </svg>
                  Activo
                </span>
                <span
                  *ngIf="!token.status"
                  class="inline-flex items-center rounded-full bg-red-100 px-2.5 py-0.5 text-xs font-medium text-red-800"
                >
                  <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-1">
                    <path d="M18 6 6 18"></path>
                    <path d="m6 6 12 12"></path>
                  </svg>
                  Inactivo
                </span>
              </td>
              
              <!-- Acciones con múltiples opciones -->
              <td class="p-4 align-middle">
                <div class="flex items-center justify-center gap-1">
                  <!-- Botón copiar token -->
                  <button
                    type="button"
                    (click)="copyToClipboard(token.token, 'token')"
                    class="inline-flex items-center justify-center rounded-lg border border-gray-300 bg-white p-2 text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-1"
                    title="Copiar token"
                  >
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      width="16"
                      height="16"
                      viewBox="0 0 24 24"
                      fill="none"
                      stroke="currentColor"
                      stroke-width="2"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                    >
                      <rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect>
                      <path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path>
                    </svg>
                    <span class="sr-only">Copiar token</span>
                  </button>
                  
                  <!-- Botón para editar -->
                  <button
                    type="button"
                    class="inline-flex items-center justify-center rounded-lg border border-gray-300 bg-white p-2 text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-1"
                    title="Editar token"
                  >
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      width="16"
                      height="16"
                      viewBox="0 0 24 24"
                      fill="none"
                      stroke="currentColor"
                      stroke-width="2"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                    >
                      <path d="M17 3a2.85 2.85 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z"></path>
                      <path d="m15 5 4 4"></path>
                    </svg>
                    <span class="sr-only">Editar token</span>
                  </button>
                  
                  <!-- Botón para alternar estado -->
                  <button
                    type="button"
                    class="inline-flex items-center justify-center rounded-lg border border-gray-300 bg-white p-2 text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-1"
                    [title]="token.status ? 'Desactivar token' : 'Activar token'"
                  >
                    <svg
                      *ngIf="token.status"
                      xmlns="http://www.w3.org/2000/svg"
                      width="16"
                      height="16"
                      viewBox="0 0 24 24"
                      fill="none"
                      stroke="currentColor"
                      stroke-width="2"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                    >
                      <path d="M18 6 6 18"></path>
                      <path d="m6 6 12 12"></path>
                    </svg>
                    <svg
                      *ngIf="!token.status"
                      xmlns="http://www.w3.org/2000/svg"
                      width="16"
                      height="16"
                      viewBox="0 0 24 24"
                      fill="none"
                      stroke="currentColor"
                      stroke-width="2"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                    >
                      <path d="M20 6 9 17l-5-5"></path>
                    </svg>
                    <span class="sr-only">Cambiar estado del token</span>
                  </button>
                </div>
              </td>
            </tr>
          </tbody>
        </table>
        
        <!-- Estado de carga y sin datos -->
        <div *ngIf="tokensFilterd.length === 0" class="flex flex-col items-center justify-center p-8 text-center bg-gray-50">
          <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="text-gray-300 mb-4">
            <path d="M10.29 3.86 1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path>
            <line x1="12" y1="9" x2="12" y2="13"></line>
            <line x1="12" y1="17" x2="12.01" y2="17"></line>
          </svg>
          <p class="text-gray-500 font-medium mb-1">No se encontraron tokens</p>
          <p class="text-gray-400 text-sm">Intenta cambiar tus criterios de búsqueda o genera un nuevo token.</p>
        </div>
      </div>
    </div>
    
    <!-- Footer con acciones masivas y exportación -->
    <div class="p-4 border-t border-gray-100 bg-gray-50 flex items-center justify-between">
      <div>
        <button class="inline-flex items-center rounded-lg border border-gray-300 bg-white px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-1">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-2">
            <path d="M12 3v12"></path>
            <path d="m17 8-5-5-5 5"></path>
            <path d="M19 21H5a2 2 0 0 1-2-2V5"></path>
          </svg>
          Exportar
        </button>
      </div>
      
      <div class="text-xs text-gray-500">
        Mostrando {{ (page - 1) * 3 + 1 }} a {{ Math.min(page * 3, tokensFilterd.length) }} de {{ tokensFilterd.length }} tokens
      </div>
    </div>
  </div>
</div>